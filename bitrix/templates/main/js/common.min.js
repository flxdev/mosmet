function scaleVideoContainer(){var e=$(".video-container").height()+5,t=parseInt(e)+"px";$(".homepage-hero-module").css("height",t)}function initBannerVideoSize(e){$(e).each(function(){$(this).data("height",$(this).height()),$(this).data("width",$(this).width())}),scaleBannerVideoSize(e)}function scaleBannerVideoSize(e){var t,i,s=$(".video-container").width(),n=$(".video-container").outerHeight()+5;$(e).each(function(){var e=$(this).data("height")/$(this).data("width");$(this).width(s),s<1e3&&(i=n,t=i/e,$(this).css({"margin-top":0,"margin-left":-(t-s)/2+"px"}),$(this).width(t).height(i)),$(".homepage-hero-module .video-container video").addClass("fadeIn animated")})}function stickinit(){setTimeout(function(){$(".js-stick").stick_in_parent({parent:".aside-menu",offset_top:110})},1)}function vrachRait(){var e=$(".js-vrach-rait.start");e.each(function(){var t=$(this),i=t.find("svg .bar"),s=parseFloat(t.data("raiting")),n=100*s/5;if(isNaN(n))n=0;else{var a=i.attr("r"),o=Math.PI*(2*a);n<0&&(n=0),n>100&&(n=100);var r=(100-n)/100*o;i.css({strokeDashoffset:r}),e.removeClass("start")}})}function lazyImage(){function e(e){return new Promise(function(t,i){var s=new Image;s.src=e,s.onload=t,s.onerror=i})}function t(t){var i=t.dataset.src;if(i)return e(i).then(function(){s(t,i)})}function i(e){0===l&&c.disconnect(),e.forEach(function(e){e.intersectionRatio>0&&(l--,c.unobserve(e.target),t(e.target))})}function s(e,t){e.classList.add("js-image-handled"),e.classList.contains("bg")?e.style.backgroundImage="url("+t+")":e.src=t,e.classList.add("fade-in")}for(var n=document.querySelectorAll(".js-image"),a=[],o=0;o<n.length;o++)a.push(n[o]);var r={rootMargin:"0px 0px",threshold:.01},l=a.length,c=void 0;if("IntersectionObserver"in window){c=new IntersectionObserver(i,r);for(var o=0;o<l;o++){if(a[o].classList.contains("js-image-handled"))return;c.observe(a[o])}}else for(var o=0;o<l;o++)t(a[o])}function modalDiplomSlider(){$(".big-image-slider-inner").each(function(){var e=$(this),t=e.parent();e.slick({accessibility:!1,lazyLoad:"ondemand",arrows:!1,draggable:!1,autoplay:!1,dots:!1,fade:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,asNavFor:t.parent().find(".modal-container-slider-inner")})}),$(".modal-container-slider-inner").each(function(){var e=$(this),t=e.parent();slidesCount(e),e.slick({accessibility:!1,lazyLoad:"ondemand",arrows:!0,draggable:!1,autoplay:!1,dots:!1,fade:!1,touchMove:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,appendArrows:t.parent().find(".arr-wrap-inner"),prevArrow:'<button type="button" class="slick-prev slick-arrow"><div class="icon"><svg class="icon icon-drop"><use xlink:href="#smallarr" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div></button>',nextArrow:'<button type="button" class="slick-next slick-arrow"><div class="icon"><svg class="icon icon-drop"><use xlink:href="#smallarr" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div></button>',asNavFor:e.closest(".modal-container").find(".big-image-slider-inner")})})}function initCustomSelectList(){var e={initClass:"cs-active",f:{}},t=$(".js-select-custom");$.each(t,function(){var t=$(this),i=t.find("button"),s=(i.data("placeholder"),t.find(".select-list"));t.on("reinit",function(){var e=s.find("input:checked");e.length?i.children(".btn-text").addClass("active").text(""+e.siblings("span").text()).parent().addClass("is-checked"):i.children(".btn-text").removeClass("active").text(i.data("placeholder")).parent().removeClass("is-checked"),CheckForSelect($(this).parents("form"))}),i.off("click").on("click",function(){return $(this).parent().toggleClass("active").siblings().removeClass("active"),!1}),s.off("change").on("change","input",function(){var e=$(this);e.prop("checked",!0),i.parent().removeClass("active"),t.trigger("reinit")}),t.trigger("reinit"),t.addClass(e.initClass),$(document).on("mouseup",function(e){t.is(e.target)||0!==t.has(e.target).length||t.removeClass("active")})})}function slidesCount(e){var t=e.parent().find(".slider-counter"),i=t.find(".slider-curr"),s=t.find(".slider-total");e.on("init reInit breakpoint beforeChange",function(e,t,n,a){var o=parseInt(t.slickGetOption("slidesToShow")),r=parseInt(t.slickGetOption("slidesToScroll")),l=parseInt(a),c=parseInt(t.slideCount),d=Math.ceil(c/o),p="init"==e.type||"reInit"==e.type||"breakpoint"==e.type?0:parseInt(l/r);s.text(1==o?c:d),i.text(p+1)})}function initMap(){function e(e,t){var i=e,s=parseFloat(i.getAttribute("data-lat")),a=parseFloat(i.getAttribute("data-lon")),o=i.getAttribute("data-icon"),r=new google.maps.LatLng(s,a);mapvar=new google.maps.Map(i,n),mapvar.setCenter(r);var l={url:o,size:new google.maps.Size(76,114),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(38,114),scaledSize:new google.maps.Size(38,57)};new google.maps.Marker({position:r,map:mapvar,icon:l,zIndex:99999});e.classList.add("inited")}var t,i,s=$(".map-element"),n={zoom:16,fullscreenControl:!0,scrollwheel:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,gestureHandling:"greedy",zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#ffffff"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"},{color:"#377041"},{lightness:"79"},{saturation:"0"}]},{featureType:"poi.attraction",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45},{visibility:"simplified"},{color:"#f0f0f0"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"labels.text",stylers:[{color:"#b0b0b0"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"simplified"},{color:"#b0b0b0"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"simplified"},{lightness:"29"},{saturation:"9"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.text",stylers:[{visibility:"simplified"},{lightness:"0"},{saturation:"0"},{gamma:"3.84"},{color:"#5d5353"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"on"}]},{featureType:"water",elementType:"all",stylers:[{color:"#cadfe7"},{visibility:"on"}]}]};if(s.length){var a=document.getElementById("map"),o=document.getElementById("map2");null==a||a.classList.contains("inited")?0:e(a,t),null==o||o.classList.contains("inited")?0:e(o,i)}s.on("update",function(){var t=$(this),s=t.get(0);null==s||s.classList.contains("inited")?0:e(s,i)})}function AjaxLoading(e){var t=this;t.ajaxLink=e,t.appendMain=$("body").find('.modal-layout[data-modal="'+e.data("modal")+'"]'),t.initEvents=function(){$(".ajax-trigger").off("click.trigger").on("click.trigger",function(e){var i=$(this).data("href"),s=$(this).data("slideto");return t.appendMain.removeClass("active"),t.action(i,s),e.preventDefault(),!1})},t.action=function(e,i){$.ajax({url:e,dataType:"html",success:function(e){var s=$(e).html();t.appendMain.html(s).promise().done(function(){t.initEvents(),modalDiplomSlider(),t.appendMain.addClass("active").trigger("reinit"),"undefined"!=typeof i&&t.appendMain.find(".big-image-slider-inner").slick("slickGoTo",i)})}})},t.initEvents()}function comenthide(){var e=$(".js-coment");e.each(function(){function e(){s>=n?a.css("display","none"):(a.removeAttr("style"),t())}function t(){a.off("click").on("click",function(e){i.attr("style")?(i.css("max-height",""),$(this).toggleText()):(i.css("max-height",n),$(this).toggleText())})}var i=$(this),s=i.height(),n=i.find(".feedback-item-content-inner").height(),a=i.parent().find(".js-list-more");$(window).on("resize",function(){setTimeout(function(){n=i.find(".feedback-item-content-inner").height(),e()},600)}),e()})}function validateForms(){var e=$(".js-validate");e.length&&e.each(function(){var e=$(this);e.parent();$.validate({form:e,modules:"logic",borderColorOnError:!0,scrollToTopOnError:!1,onValidate:function(t){CheckForSelect(e)},onSuccess:function(t){return formResponse(e),!1}})})}function CheckForSelect(e){if(e.find(".select-check").length){var t=e.find(".select-check");t.each(function(){var e=$(this),t=(e.find(".selects"),e.find(".option.has-error"));t.length?e.addClass("error"):e.removeClass("error")}),!t.hasClass("error")}}function resetForm(e){e[0].reset(),e.find(".star-item").removeClass("active")}function popUpsInit(){var e=this;e.b={open:$(".js-popup-button")},e.c={popup:$(".js-popup-container"),body:$("body"),header:$(".page__header")},e.f={},e.conf={body_class:"modal_open",active_class:"active",close_selector:".closePopup",initial_class:"popup-initialed",header_class:"is-hidden"};var t;e.f.initModalActions=function(t){$(t).on("click",".modal-container",function(t){$(e.conf.close_selector).is(t.target)||t.stopPropagation()}),t.find(e.conf.close_selector).add(t).off("click.popup").on("click.popup",function(){e.f.closePopup(t)})},e.f.closePopup=function(i){var s=Math.abs(t),n=i.find(".modal-container-content:not(.response)");_response=i.find(".response"),!s>0&&e.c.header.removeClass(e.conf.header_class),i.removeClass(e.conf.active_class),e.c.body.removeClass(e.conf.body_class).removeAttr("style"),$(window).scrollTop(s),setTimeout(function(){n.removeAttr("style"),_response.removeClass("visible");var e=i.find(".js-select-custom"),t=i.find("input");t.prop("checked",!1),e.trigger("reinit")},500)},e.f.openPopup=function(i){t=e.c.body.scrollTop(),0===t&&(t=$("html").scrollTop()),i.addClass(e.conf.active_class),e.c.body.addClass(e.conf.body_class).css("top",-t),setTimeout(function(){e.c.header.addClass(e.conf.header_class)},40)},$.each(e.c.popup.not("."+e.conf.initial_class),function(){var t=$(this);e.f.initModalActions(t),t.off("reinit").on("reinit",function(){e.f.initModalActions(t)}),t.addClass(e.conf.initial_class)}),e.b.open.off("click.popup").on("click.popup",function(t){t.preventDefault();var i=$(this),s=e.c.popup.filter('[data-modal="'+i.data("modal")+'"]'),n=i.data("spec");return"undefined"!=typeof n&&(_select=s.find(".js-select-custom"),_input=s.find('input[value="'+n+'"]'),_input.prop("checked",!0),_select.trigger("reinit")),e.f.openPopup(s),!1})}function formResponse(e){if(e.closest(".modal-container").length){var t=e.closest(".modal-container"),i=t.next(".response");i.length&&t.fadeOut("slow",function(){i.fadeIn("normal")})}}function isMobile(){return/Android|webOS|iPhone|iPod|BlackBerry|Windows Phone|iemobile/i.test(navigator.userAgent)}function Parse(e){this.item=e,this.container=document.querySelector(".service-items"),this.list,this.count=0,this.container&&this.init()}function suggest(e){this.el=e,this.options={input:".biginput",sugglist:".js-suggest-list",focus:"focus"},this.keys={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},this.counter=1,this.init()}$(window).on("load",function(){stickinit(),lazyImage(),vrachRait()}),document.addEventListener("DOMContentLoaded",function(){function e(){var e=$(".biginput");e.each(function(){var e=$(this);parent=e.closest(".suggest-wrapper"),e.on("input",function(){var t=e.val().length;t>=3?parent.addClass("focus"):parent.removeClass("focus")})})}function t(){var e=$(".js-menu"),t=$(".mainmenu"),i="active",s="menu-open";e.add(t).on("click",function(){if(!e.hasClass("anim")){if(e.addClass("anim"),t.toggleClass(i),e.hasClass(i))e.removeClass(i),w.body.add(w.header).removeClass(s),window.__prevScrollTop&&window.scroll(0,window.__prevScrollTop),window.__prevScrollTop=null;else{var n=$(window).scrollTop();window.__prevScrollTop=n,e.addClass(i),document.body.style.top=-n+"px",window.scroll(0,window.__prevScrollTop),setTimeout(function(){w.body.add(w.header).addClass(s)},51)}setTimeout(function(){e.removeClass("anim")},500)}}),$(".mainmenu-inner").click(function(e){e.stopPropagation()})}function s(){var e=$(".js-showmore");e.each(function(){var e,t=$(this),i=t.parent().find(".js-showmore-target");setTimeout(function(){i.addClass("ready").hide()},500),t.on("click",function(){e=i.find(".slick-slider"),t.hasClass("active")?(i.slideUp("normal"),t.removeClass("active")):(i.slideDown("normal",function(){setTimeout(function(){e[0].slick.refresh()},300)}),t.addClass("active")),t.toggleText()})})}function n(){var e=$(".header-row-nav"),t=e.find(".dropdown"),i=$(".page__header-drop"),s=$(".page__header-drop-item"),n="is-shown",a="is-shown";t.each(function(){var e=$(this),s=parseInt(e.data("id"));e.on("mouseenter touchstart",function(){i.find("[data-id="+s+"]").length?(e.addClass("active").siblings().removeClass("active"),i.addClass(n),i.find("[data-id="+s+"]").addClass(a).siblings().removeClass(a)):(i.removeClass(n),t.removeClass("active"))})}),t.add(i).on("mouseleave touchstart",function(){setTimeout(function(){1!=$(".page__header-drop:hover").length&&0!=!$(".dropdown:hover").length&&(i.removeClass(n).attr("style",""),s.removeClass(a),t.removeClass("active"))},1)})}function a(){if($(".js-accordion-trigger").length){$(".aside-stick").stick_in_parent({offset_top:73});var e=$(".js-accordion-trigger"),t=$(".js-accordion-body"),i=e.children(".table-item").not(".table-status").not(".table-btn");e.not(".active").find(t).hide(),i.on("click",function(e){var i=$(this).parent();i.find(t);i.hasClass("active")?(i.siblings().removeClass("active").find(t).slideUp(200),i.removeClass("active").find(t).slideUp(300)):(i.siblings().removeClass("active").find(t).slideUp(200),i.addClass("active").find(t).slideDown(300,function(){var e=i.offset().top;jQuery("body:not(:animated)").animate({scrollTop:e-80},500)})),setTimeout(function(){$("body").trigger("scroll")},801)})}}function o(){$(".js-indexSlider").each(function(){var e=$(this),t=e.parent();slidesCount(e),e.slick({accessibility:!1,lazyLoad:"ondemand",arrows:!0,dots:!1,fade:!0,touchMove:!1,dragable:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,appendArrows:t.find(".arr-wrap-inner"),prevArrow:w.arnprevcontent,nextArrow:w.arnextcontent})})}function r(){$(".js-contentslider").each(function(){var e=$(this),t=e.parent();slidesCount(e),e.slick({accessibility:!1,lazyLoad:"progressive",arrows:!0,dots:!1,fade:!1,touchMove:!1,dragable:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,appendArrows:t.find(".arr-wrap-inner"),prevArrow:w.arnprevcontent,nextArrow:w.arnextcontent})})}function l(){$(".js-sideslider").each(function(){var e=$(this),t=e.parent();e.slick({accessibility:!1,lazyLoad:"ondemand",arrows:!1,dots:!0,fade:!0,touchMove:!1,dragable:!1,infinite:!1,autoplay:!0,autoplaySpeed:8e3,slidesToShow:1,slidesToScroll:1,appendDots:t.find(".dots-wrap")})})}function c(){var e=document.querySelectorAll(".js-aside-drop");for(i=0;i<e.length;i++)e[i].addEventListener("click",function(t){if(t.target.classList.contains("aside-nav-link")&&t.target.classList.contains("dropdown")){t.preventDefault();var s=this;if(s.classList.contains("active"))s.classList.remove("active");else{for(i=0;i<e.length;i++)e[i].classList.remove("active");s.classList.add("active")}setTimeout(function(){w.stick.trigger("sticky_kit:recalc")},302)}})}function d(){var e=$(".video-wrap");e.each(function(){var e=$(this);e.on("click",function(t){e.addClass("played").find("iframe")[0].src+="?&autoplay=1",t.preventDefault()})})}function p(e,t,i){var s=$(e),n=s.closest(t),a=n.find(i);s.each(function(){$(this).on("click",function(){var e=n.find(a);e.hasClass("active")?e.add($(this)).removeClass("active"):(n.siblings().find(a).removeClass("active"),e.add($(this)).addClass("active"))})})}function h(){if($(".js-tabs-wrap").length){var e=$(".js-tabs-wrap");e.each(function(){var t=$(this),i=t.find(".js-tab-trigger"),s=t.find(".tabs-body"),n=s.find(".tabs-cont"),a=t.find(i).filter(".active"),o=a.index();a.length?n.hide().eq(o).show():(n.not(":first").hide(),i.first().addClass("active")),i.on("click",function(t){var s=$(this);if(t.preventDefault(),!s.hasClass("active")){s.addClass("active").siblings().removeClass("active");var a=e.find(i).filter(".active");n.hide().eq($(a).index()).fadeIn()}})})}}function f(){$(".js-otdel").each(function(){var e=$(this),t=e.parent();slidesCount(e),e.slick({accessibility:!1,lazyLoad:"progressive",arrows:!0,dots:!0,touchMove:!1,dragable:!1,infinite:!1,slidesToShow:4,slidesToScroll:4,appendDots:t.find(".dots-wrap"),appendArrows:t.parent().find(".arr-wrap-inner"),prevArrow:w.arnprevcontent,nextArrow:w.arnextcontent,responsive:[{breakpoint:996,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:675,settings:{slidesToShow:2,slidesToScroll:2,lazyLoad:"ondemand"}},{breakpoint:490,settings:{slidesToShow:1,slidesToScroll:1}}]})})}function u(){$(".diplom-slider-inner").each(function(){var e=$(this),t=e.parent();slidesCount(e),e.slick({accessibility:!0,lazyLoad:"ondemand",arrows:!0,draggable:!1,autoplay:!1,dots:!1,fade:!1,touchMove:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,appendArrows:t.find(".arr-wrap-inner"),prevArrow:w.arnprevcontent,nextArrow:w.arnextcontent})})}function v(){$(".js-wide").each(function(){var e=$(this),t=e.parent();e.slick({accessibility:!1,lazyLoad:"ondemand",arrows:!0,dots:!1,touchMove:!1,dragable:!1,infinite:!0,slidesToShow:5,slidesToScroll:1,appendDots:t.find(".dots-wrap"),appendArrows:t.parent().find(".arr-wrap-inner"),prevArrow:w.arnprevcontent,nextArrow:w.arnextcontent,responsive:[{breakpoint:1980,settings:{slidesToShow:4}},{breakpoint:996,settings:{slidesToShow:3}},{breakpoint:675,settings:{slidesToShow:2}},{breakpoint:490,settings:{slidesToShow:1}}]})})}function g(){$(".js-specialist").each(function(){var e=$(this),t=e.parent();slidesCount(e),e.slick({accessibility:!1,lazyLoad:"ondemand",arrows:!0,dots:!0,touchMove:!1,dragable:!1,infinite:!0,slidesToShow:e.hasClass("inner")?4:8,slidesToScroll:e.hasClass("inner")?4:8,appendDots:t.find(".dots-wrap"),appendArrows:t.parent().find(".arr-wrap-inner"),prevArrow:w.arnprevcontent,nextArrow:w.arnextcontent,responsive:[{breakpoint:1980,settings:{slidesToShow:e.hasClass("inner")?4:8,slidesToScroll:e.hasClass("inner")?4:8}},{breakpoint:1500,settings:{slidesToShow:e.hasClass("inner")?4:6,slidesToScroll:e.hasClass("inner")?4:5}},{breakpoint:1200,settings:{slidesToShow:5,slidesToScroll:4}},{breakpoint:900,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:490,settings:{slidesToShow:1,slidesToScroll:1}}]})})}function m(){$(".video-container").length&&(scaleVideoContainer(),initBannerVideoSize(".video-container .poster img"),initBannerVideoSize(".video-container .filter"),initBannerVideoSize(".video-container video"),$(window).on("resize",function(){scaleVideoContainer(),scaleBannerVideoSize(".video-container .poster img"),scaleBannerVideoSize(".video-container .filter"),scaleBannerVideoSize(".video-container video")}))}var w={body:$("body"),header:$(".page__header"),html:$("html"),hidden:"is-hidden",wrpr:$(".wrapper"),stick:$(".js-stick"),arnextcontent:'<button type="button" class="slick-next slick-arrow"><div class="icon"><svg class="icon icon-drop"><use xlink:href="#smallarr" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div></button>',arnprevcontent:'<button type="button" class="slick-prev slick-arrow"><div class="icon"><svg class="icon icon-drop"><use xlink:href="#smallarr" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div></button>'};!function(){function e(){var e=$(document).scrollTop();t(e)}function t(e){e<=100?i.classList.remove(w.hidden):i.classList.add(w.hidden)}var i=document.querySelector(".cd-auto-hide-header");$(window).on("scroll",function(){requestAnimationFrame(e)})}(),e(),t(),s(),n(),a(),o(),r(),l(),c(),d(),p(".js-dropdown",".js-dropdown-parent",".js-dropdown-target"),h(),$(".js-scroll-to").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("href"),i=$("body").find('[data-id="'+t+'"]');if($(".aside-stick").trigger("sticky_kit:recalc"),i.length){var s=$(i).offset().top,n=window.matchMedia("(max-width: 991px)").matches?70:118;$("html, body:not(:animated), .out:not(:animated)").animate({scrollTop:s-n},500)}}),f(),u(),v(),g(),m();var y=document.querySelectorAll(".js-suggest");suggesinput=new suggest(y),popUpsInit(),initCustomSelectList(),validateForms(),comenthide();new AjaxLoading($(".ajax-trigger"))}),window.Promise||(window.Promise=Promise),jQuery.fn.toggleText=function(){var e=this.data("alt-text");e&&(this.data("alt-text",this.text()),this.text(e))},Parse.prototype={init:function(){this.list=this.item.section,this.len=this.list.length,this.parseSections()},parseSections:function(){for(var e=0;e<this.len;e++){var t=this.list[e],i=document.createDocumentFragment(),s=document.createElement("div");s.classList.add("service-item"),s.setAttribute("data-id","#"+(e+1)),null!=t.name&&$(s).append('<div class="service-item-title"><div class="title h2">'+t.name+"</div></div>"),i.appendChild(s),this.appendSubList(i,t.subsection)}},appendSubList:function(e,t){for(var i=t.length,s=0;s<i;s++){var n=t[s],a=document.createElement("div");a.classList.add("service-item-container"),null!=n.name&&$(a).append('<div class="service-item-subtitle"><div class="title h3">'+n.name+"</div></div>"),$(a).append(this.appendLetters(a,n.letters)),$(e).find(".service-item").append(a)}this.container.append(e),this.checkBlocksLength(),this.InitFilter()},appendLetters:function(e,t){for(var i=t.length,s=document.createDocumentFragment(),n=0;n<i;n++){var a=t[n],o=document.createElement("div");o.classList.add("service-item-item"),$(o).append('<div class="service-item-letter" data-filter="'+a.letter+'">'+a.letter+"</div>").append(this.appendItems(o,a.items)),s.append(o)}return s},appendItems:function(e,t){var i=t.length,s=document.createElement("ul"),n=document.createDocumentFragment();s.classList.add("service-item-links");for(var a=0;a<i;a++){var o=t[a],r=document.createElement("li");$(r).append('<a class="text" href="'+o.link+'">'+o.name+"</a>"),this.count++,n.append(r)}return s.append(n),s},checkBlocksLength:function(){this.blocks=this.container.querySelectorAll(".service-item-item"),this.container.classList.contains("fullsize")||this.blocks.length>3&&this.hideBlocks()},hideBlocks:function(){this.container.classList.add("blocks-hidden"),$(this.container).append('<div class="btn light js-expandlist"><span data-alt-text="Свернуть список услуг">Смотреть все '+this.count+" услуг</span></div>"),this.initExpand()},initExpand:function(){var e=this;this.trigger=this.container.querySelector(".js-expandlist"),this.span=$(this.trigger).find("span"),this.trigger.addEventListener("click",function(){e.container.classList.contains("blocks-hidden")?(e.container.classList.remove("blocks-hidden"),e.span.toggleText()):(e.container.classList.add("blocks-hidden"),e.span.toggleText(),$("html, body:not(:animated), .out:not(:animated)").animate({scrollTop:$(e.container).offset().top-110},500)),$(".js-stick").trigger("sticky_kit:recalc")})},InitFilter:function(){this.ActiveLetters=this.item.activeLetters,this.filterwrap=document.querySelectorAll(".service-letter");for(var e=0;e<this.ActiveLetters.length;e++){var t=this.ActiveLetters[e].letter,i=$(this.filterwrap).filter('[data-letter="'+t+'"]');i.addClass("selected")}this.filterBlocks()},filterBlocks:function(){var e=this,t=$(this.filterwrap).filter(".selected");t.each(function(){var e=$(this),t=e.data("letter").toLowerCase();e.off("click").on("click",function(){e.hasClass("active")?e.removeClass("active"):e.addClass("active").siblings().removeClass("active"),filterElems(t,e)})}),filterElems=function(t,s){var n=!1;if(s.hasClass("active")){for(i=0;i<e.blocks.length;i++){var a=e.blocks[i],o=$(a).find(".service-item-letter").data("filter").toLowerCase();o===t?(a.classList.remove("hidden"),n===!1&&(n=a)):a.classList.add("hidden")}e.container.classList.contains("fullsize")||(e.container.classList.contains("blocks-hidden")?(e.container.classList.remove("blocks-hidden"),e.trigger.classList.add("hidden")):(e.trigger.classList.add("hidden"),e.span.toggleText())),$("html, body:not(:animated), .out:not(:animated)").animate({scrollTop:$(n).offset().top-110},500)}else{for(i=0;i<e.blocks.length;i++){var a=e.blocks[i];a.classList.remove("hidden")}e.container.classList.contains("fullsize")||(e.container.classList.contains("blocks-hidden")?e.trigger.classList.remove("hidden"):(e.container.classList.add("blocks-hidden"),e.trigger.classList.remove("hidden")))}}}},suggest.prototype={init:function(){this.elements=this.el,this.findelements()},findelements:function(){var e=this,t=this.elements.length;for(i=0;i<t;i++)this.search=this.elements[i].querySelectorAll(this.options.input),this.suggest=this.elements[i].querySelectorAll(this.options.sugglist),this.seggestInner=this.elements[i].querySelectorAll(".suggest-list-inner"),$(this.suggest[0]).slideUp(),this.search[0].addEventListener("input",function(t){e.dosearch(searchArr.items)}),this.search[0].addEventListener("keydown",function(t){e.doKeypress(this.keys,t)})},dosearch:function(e){var t=this.search[0].value;if(t.length>=3){var i=$.grep(searchArr.items,function(e){return e.name.search(RegExp("^"+t,"i"))!=-1});i.length>=1&&(this.removeChildren(),$(this.suggest[0]).slideDown(),counter=1);for(var s=0;s<i.length;s++){var n=i[s];$(this.seggestInner).append("<a href="+n.link+" role='option' tabindex='-1' class='autocomplete-suggestion' id='suggestion-"+counter+"'>"+n.name+"</a>"),counter+=1}}else this.removeChildren(),$(this.suggest[0]).slideUp();this.addClickToItem()},addClickToItem:function(){var e=this;this.seggestInner[0].addEventListener("click",function(t){if(t.target.matches("div")){var i=t.target,s=i.textContent;e.search[0].value=s,e.removeChildren(),$(e.suggest[0]).slideUp()}})},removeChildren:function(){for(;this.seggestInner[0].firstChild;)this.seggestInner[0].removeChild(this.seggestInner[0].firstChild)},doKeypress:function(e,t){var i=this,s=!1;switch(s=$(this.seggestInner[0]).children("a").hasClass("highligt"),t.which){case this.keys.ESC:i.removeChildren(),$(this.suggest[0]).slideUp();break;case this.keys.RIGHT:return i.selectOption(s);case this.keys.TAB:i.removeChildren(),$(this.suggest[0]).slideUp();break;case this.keys.RETURN:if(s)return t.preventDefault(),t.stopPropagation(),i.selectOption(s);case this.keys.UP:return t.preventDefault(),t.stopPropagation(),i.moveUp(s);case this.keys.DOWN:return t.preventDefault(),t.stopPropagation(),i.moveDown(s);default:return}},moveUp:function(e){var t;e?(t=$(this.seggestInner[0]).find(".highligt"),t.removeClass("highligt").prev("a").addClass("highligt"),e=!1):(t=$(this.seggestInner[0]).children().last("a"),t.addClass("highligt"))},moveDown:function(e){var t;e?(t=$(this.seggestInner[0]).find(".highligt"),t.removeClass("highligt").next("a").addClass("highligt"),e=!1):(t=$(this.seggestInner[0]).children().first("a"),t.addClass("highligt"))},selectOption:function(e){var t=this;if(e){var i=$(this.seggestInner[0]).find(".highligt");$(this.search[0]).val(i.text()).focus(),window.location.replace(i.attr("href")),t.removeChildren(),$(this.suggest[0]).slideUp()}}};